<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.13/css/intlTelInput.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.13/js/intlTelInput.min.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="css/tp-from.css">

    <title>Technology partner form</title>
    <style>
        #technology_partner_form {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        #technology_partner_form label {
            display: flex;
            flex-direction: column;
            gap: 4px;
            font-size: 16px;
            font-family: "Inter";
            line-height: 24px;
            font-weight: 500;
            color: rgba(0, 0, 0, 0.88);
        }

        #technology_partner_form input {
            border: 1px solid #F3F3F3;
            background: #F7F7F7;
            border-radius: 8px;
            padding: 16px !important;
            outline: none;
            width: 100%;
            color: #333333 !important;
            font-size: 16px;
            line-height: 20px;
            font-weight: 400;
            font-family: "Inter";
            letter-spacing: -0.02rem;
        }

        #technology_partner_form input::-moz-placeholder {
            color: #999999;
        }

        #technology_partner_form input::placeholder {
            color: #999999;
        }

        #technology_partner_form select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            display: flex;
            padding: 16px 40px 16px 16px;
            align-items: center;
            border-radius: 8px;
            border: 1px solid #F3F3F3;
            background: #F7F7F7;
            width: 100%;
            outline: none;
            color: #333333 !important;
            font-size: 16px;
            line-height: 20px;
            font-weight: 400;
            font-family: "Inter";
            letter-spacing: -0.02rem;
        }

        #technology_partner_form .iti {
            display: flex;
            gap: 12px;
        }

        #technology_partner_form .iti__flag-container {
            position: relative;
            border-radius: 8px;
            border: 1px solid #F3F3F3;
            background: #F7F7F7;
            padding: 16px;
        }

        #technology_partner_form .iti__selected-flag {
            background: transparent !important;
            padding: 0 !important;
        }

        #technology_partner_form .iti__selected-dial-code {
            font-weight: 400 !important;
            color: #333333 !important;
            font-size: 16px !important;
            line-height: 20px !important;
            letter-spacing: -0.02rem !important;
        }

        #technology_partner_form .iti input[type=tel] {
            width: 100%;
            border: 1px solid #F3F3F3;
            background: #F7F7F7;
            border-radius: 8px;
            padding: 16px !important;
        }

        #technology_partner_form .iti__arrow {
            border: none !important;
            background-image: url(../img/drop-down-arrow.svg);
            width: 16px;
            height: 16px;
            background-position: center;
            background-repeat: no-repeat;
        }

        #technology_partner_form button {
            border-radius: 12px;
            background: #7622ED;
            display: flex;
            width: 100%;
            padding: 16px 24px;
            justify-content: center;
            align-items: center;
            border: none !important;
            color: #F4F4F4;
            font-family: "Inter";
            font-size: 16px;
            font-weight: 600;
            line-height: 20px;
            letter-spacing: -0.01rem;
        }

        #tp_full_name {
            display: flex;
            gap: 24px;
        }

        #tp_full_name label {
            flex-grow: 1;
        }

        .tp-select-tag {
            width: 100%;
            position: relative;
            display: flex;
            gap: 8px;
        }

        .tp-select-tag::after {
            content: url(../img/drop-down-arrow.svg);
            width: 16px;
            height: 16px;
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
        }

        .tp_company_details {
            display: flex !important;
            gap: 24px;
        }

        .tp_company_details label {
            flex-grow: 1;
        }

        .tp_company_details label[for=tp_company_name] {
            width: 65%;
        }

        @media (max-width: 991px) {
            #technology_partner_form {
                gap: 20px;
            }
        }

        @media (max-width: 767px) {
            #technology_partner_form {
                gap: 16px;
            }

            #technology_partner_form label {
                font-size: 14px !important;
                letter-spacing: -0.02rem;
            }

            #technology_partner_form .iti__selected-dial-code {
                font-size: 14px !important;
            }

            #technology_partner_form input,
            #technology_partner_form select {
                font-size: 14px !important;
            }

            #technology_partner_form select {
                padding: 16px 32px 16px 16px;
            }

            #tp_full_name {
                gap: 20px;
            }
        }

        .tp-select-tag select {
            position: relative;
        }

        .tp-select-tag select::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            right: 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Technology Partner -->
        <form id="technology_partner_form" data-form-id="6918909">
            <span id="tp_full_name">
                <label for="tp_first_name">First Name
                    <input type="text" id="tp_first_name" name="tp_first_name" required></label>

                <label for="tp_last_name">Last name
                    <input type="text" id="tp_last_name" name="tp_last_name" required></label>
            </span>

            <label for="tp_email">Email
                <input type="email" id="tp_email" name="tp_email" required></label>

            <label for="tp_phone">Enter your Phone Number
                <input type="tel" id="tp_phone" name="tp_phone" required></label>

            <span class="tp_company_details">
                <label for="tp_company_name">Company Name
                    <input type="text" id="tp_company_name" name="tp_company_name" required></label>

                <label>Company Size
                    <div class="tp-select-tag">
                        <select name="tp_company_size" id="tp_company_size">
                            <option value="n/a" disabled selected></option>
                            <option value="11-50">11-50 employees</option>
                            <option value="51-100">51-100 employees</option>
                            <option value="101-500">101-500 employees</option>
                            <option value="500+">500+ employees</option>
                        </select>
                    </div>
                </label>
            </span>

            <label>
                <div class="tp-select-tag">
                    <select name="tp_current_integration" id="tp_current_integration">
                        <option value="n/a" disabled selected>Do you currently have an integration built with us?
                        </option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                        <option value="In Progress">In Progress</option>
                        <option value="Not Sure">Not Sure</option>
                    </select>
                </div>
            </label>

            <label>
                <div class="tp-select-tag">
                    <select name="tp_customers_numbers" id="tp_customers_numbers">
                        <option value="n/a" disabled selected>How many customers does your comapny currently serve?
                        </option>
                        <option value="11-50">11-50 customers</option>
                        <option value="51-500">51-500 customers</option>
                        <option value="500-1000">500-1000 customers</option>
                        <option value="1000+">1000+ customers</option>
                    </select>
                </div>
            </label>

            <button type="submit">Become a Partner</button>
        </form>
    </div>

    <script>
        // Initialize intl-tel-input on the phone input field
        const tp_phoneInputField = document.querySelector("#tp_phone");
        const tp_phoneInput = window.intlTelInput(tp_phoneInputField, {
            utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.13/js/utils.js",
            separateDialCode: true,
        });

        // Function to sanitize input
        function sanitizeInput(input) {
            const div = document.createElement('div');
            div.textContent = input;
            return div.innerHTML;
        }

        // Function to validate phone number
        function validatePhone() {
            return tp_phoneInput.isValidNumber();
        }

        // Form submission handler
        document.getElementById('technology_partner_form').addEventListener('submit', async function (event) {
            event.preventDefault();
            const formData = new FormData(this);
            const firstName = sanitizeInput(formData.get('tp_first_name').trim());
            const lastName = sanitizeInput(formData.get('tp_last_name').trim());
            const tpEmail = sanitizeInput(formData.get('tp_email').trim());
            const tpPhone = sanitizeInput(tp_phoneInput.getNumber().trim());
            const companyName = sanitizeInput(formData.get('tp_company_name').trim());
            const companySize = sanitizeInput(formData.get('tp_company_size'));
            const currentIntegration = sanitizeInput(formData.get('tp_current_integration'));
            const customersNumber = sanitizeInput(formData.get('tp_customers_numbers'));

            // Combine first and last names
            const fullName = `${firstName} ${lastName}`;

            // Check if all fields are filled and phone number is valid
            let missingFields = [];
            if (!firstName) missingFields.push('First Name');
            if (!lastName) missingFields.push('Last Name');
            if (!tpEmail) missingFields.push('Email');
            if (!tpPhone) missingFields.push('Phone Number');
            if (!companyName) missingFields.push('Company Name');
            if (!companySize) missingFields.push('Company Size');
            if (!currentIntegration) missingFields.push('Current Integration');
            if (!customersNumber) missingFields.push('Number of Customers');

            if (missingFields.length > 0) {
                alert('Please fill out the following fields: ' + missingFields.join(', '));
                return;
            }

            if (!validatePhone()) {
                alert('Please enter a valid phone number.');
                return;
            }

            const data = {
                name: fullName,
                email: tpEmail,
                fields: {
                    business_name: companyName,
                    phone_number: tpPhone,
                    selected_drop_items: companySize,
                    selected_drop_items: currentIntegration,
                    selected_drop_items: customersNumber,
                }
            };

            const API_KEY = '1rDI-TcVFRSypDQ6r_ejrg';
            const FORM_ID = '6918909';
            try {
                const response = await fetch(`https://api.convertkit.com/v3/forms/${FORM_ID}/subscribe`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        api_key: API_KEY,
                        email: data.email,
                        first_name: data.name,
                        fields: data.fields
                    })
                });
                if (response.ok) {
                    alert('Form submitted successfully!');
                    document.getElementById('technology_partner_form').reset();
                    tp_phoneInputField.value = '';
                } else {
                    alert('Error submitting form.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Error submitting form.');
            }
        });
    </script>

</body>

</html>